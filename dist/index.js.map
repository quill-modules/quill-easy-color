{"version":3,"file":"index.js","sources":["../src/ui/easy-color-pick.js","../src/utils/debounce.js","../src/formats/background.js","../src/formats/color.js","../src/theme/easy-color-snow.js","../src/theme/easy-color-bubble.js"],"sourcesContent":["import Quill from 'quill';\nimport { debounce } from '../utils';\nconst Picker = Quill.import('ui/picker');\n\nexport default class EasyColorPicker extends Picker {\n  constructor(select, label, themeOptions) {\n    super(select);\n    this.themeOptions = Object.assign(\n      {\n        localStorageKey: 'used-color',\n        closeAfterChange: true,\n        customColorChangeDelay: 300,\n        maxHistoryColor: 10,\n        expandIcon: `<svg viewBox=\"0 0 32 32\"><path fill=\"currentColor\" d=\"m24 12l-8 10l-8-10z\"/></svg>`,\n        keepChooseColor: true,\n      },\n      themeOptions\n    );\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n\n    this.localColorUsedKey = `${this.select.className}-${this.themeOptions.localStorageKey}`;\n    try {\n      this.usedColor = JSON.parse(localStorage.getItem(this.localColorUsedKey));\n      if (!this.usedColor || !(this.usedColor instanceof Array)) {\n        throw new Error('usedColor get wrong type');\n      }\n    } catch (e) {\n      localStorage.setItem(this.localColorUsedKey, []);\n      this.usedColor = [];\n    }\n    this.createUsedColor();\n\n    if (this.themeOptions.keepChooseColor) {\n      this.container.classList.add('keep-color');\n      this.bindLabelEvent();\n      this.expendIcon();\n    }\n    this.curColor = '';\n  }\n\n  bindLabelEvent() {\n    this.label.addEventListener('mousedown', (e) => {\n      this.close();\n      e.preventDefault();\n      this.selectItem(\n        Array.from(this.options.querySelectorAll('.ql-picker-item')).find(\n          (op) => (op.dataset.value ?? '') === this.curColor\n        ),\n        true\n      );\n    });\n  }\n\n  expendIcon() {\n    const span = document.createElement('span');\n    span.classList.add('ql-picker-expand');\n    this.themeOptions.expandIcon && (span.innerHTML = this.themeOptions.expandIcon);\n    this.label.parentNode.insertBefore(span, this.label.nextSibling);\n\n    span.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.labelIcon = span;\n  }\n\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      let item = this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n      option = this.select.options[this.select.selectedIndex];\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    let isActive = option != null && option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n    // 上面代码没有更改, 继承自 quill/ui/picker 主要是需要使用到 isActive\n    // 使展开 icon 与图标 icon 同背景和颜色\n    this.labelIcon && this.labelIcon.classList.toggle('ql-active', isActive);\n  }\n\n  createUsedColor() {\n    const usedWrap = document.createElement('div');\n    usedWrap.classList.add('used');\n\n    const usedColorLabels = document.createElement('div');\n    usedColorLabels.classList.add('used-list');\n    usedWrap.appendChild(usedColorLabels);\n    this.options.appendChild(usedWrap);\n    this.usedColorLabels = usedColorLabels;\n    for (let i = this.usedColor.length - 1; i >= 0; i--) {\n      this.createUsedColorItem(this.usedColor[i]);\n    }\n  }\n\n  createUsedColorItem(color) {\n    const option = this.createUsedColorOption(color);\n    this.select.appendChild(option);\n    const label = this.buildItem(option);\n    label.setAttribute('custom', '');\n    this.usedColorLabels.insertBefore(label, this.usedColorLabels.firstChild);\n  }\n\n  createUsedColorOption(color) {\n    const findOption = this.select.querySelector(`option[value='${color}'][custom]`);\n    if (findOption) {\n      return findOption;\n    }\n    const option = document.createElement('option');\n    option.setAttribute('custom', '');\n    option.setAttribute('value', color);\n    return option;\n  }\n\n  removeUsedColor(color) {\n    const option = this.select.querySelector(`option[value='${color}'][custom]`);\n    const label = this.options.querySelector(`p[data-value='${color}'][custom]`);\n    option && option.remove();\n    label && label.remove();\n  }\n\n  selectColor(color) {\n    if (!color) return;\n    const index = this.usedColor.findIndex((c) => c === color);\n    if (index !== -1) {\n      const repeatColor = this.usedColor.splice(index, 1);\n      this.removeUsedColor(repeatColor);\n    }\n    this.usedColor.unshift(color);\n    const removeColors = this.usedColor.slice(this.themeOptions.maxHistoryColor);\n    removeColors.map((color) => this.removeUsedColor(color));\n    this.usedColor = this.usedColor.slice(0, this.themeOptions.maxHistoryColor);\n    localStorage.setItem(this.localColorUsedKey, JSON.stringify(this.usedColor));\n    this.createUsedColorItem(color);\n  }\n\n  buildItem(option) {\n    if (option.value === 'custom') {\n      const item = document.createElement('div');\n      const input = document.createElement('input');\n      item.classList.add('custom');\n      input.setAttribute('type', 'color');\n      item.appendChild(input);\n\n      input.addEventListener(\n        'input',\n        debounce(() => {\n          this.selectColor(input.value);\n          this.selectItem(this.options.querySelector(`p[data-value='${input.value}']`), true);\n        }, 300)\n      );\n      this.customColorInput = input;\n      return item;\n    } else {\n      const item = document.createElement('p');\n      item.tabIndex = '0';\n      item.setAttribute('role', 'button');\n      item.classList.add('ql-picker-item');\n      if (!option.value) {\n        item.classList.add('blank');\n      }\n      if (option.hasAttribute('value')) {\n        item.setAttribute('data-value', option.getAttribute('value'));\n      }\n      if (option.textContent) {\n        item.setAttribute('data-label', option.textContent);\n      }\n      item.addEventListener('click', () => {\n        this.selectColor(item?.dataset?.value);\n        this.selectItem(item, true);\n      });\n\n      item.style.backgroundColor = option.getAttribute('value') || '';\n      return item;\n    }\n  }\n\n  selectItem(item, trigger = false) {\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    const colorLabel = this.label.querySelector('.ql-color-label');\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n\n    this.curColor = value;\n\n    const selected = this.container.querySelector('.ql-selected');\n    // if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // change index find function\n    this.select.selectedIndex = Array.from(this.select.children).findIndex(\n      (option) => option.value === (item.dataset.value ?? '')\n    );\n\n    if (item.hasAttribute('data-value')) {\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.themeOptions.closeAfterChange && this.close();\n    }\n  }\n}\n","export function debounce(fn, delay) {\r\n  let timestamp;\r\n  return function (...args) {\r\n    if (timestamp) {\r\n      clearTimeout(timestamp);\r\n    }\r\n    timestamp = setTimeout(() => {\r\n      fn.apply(this, args);\r\n    }, delay);\r\n  };\r\n}\r\n","import Quill from 'quill';\r\nconst Parchment = Quill.import('parchment');\r\n// 兼容 quill1.3.7\r\nconst StyleAttr = Parchment.StyleAttributor || Parchment.Attributor.Style;\r\nconst BackgroundStyle = new StyleAttr('background', 'background-color', {\r\n  scope: Parchment.Scope.INLINE,\r\n});\r\n\r\nexport { BackgroundStyle };\r\n","import Quill from 'quill';\r\nconst Parchment = Quill.import('parchment');\r\n// 兼容 quill1.3.7\r\nconst StyleAttr = Parchment.StyleAttributor || Parchment.Attributor.Style;\r\nconst ColorStyle = new StyleAttr('color', 'color', {\r\n  scope: Parchment.Scope.INLINE,\r\n});\r\n\r\nexport { ColorStyle };\r\n","import Quill from 'quill';\r\nconst SnowTheme = Quill.import('themes/snow');\r\nconst IconPicker = Quill.import('ui/icon-picker');\r\nconst Picker = Quill.import('ui/picker');\r\nimport EasyColorPicker from '../ui/easy-color-pick';\r\nimport { BackgroundStyle } from '../formats/background';\r\nimport { ColorStyle } from '../formats/color';\r\n\r\nQuill.register(\r\n  {\r\n    'attributors/style/color': ColorStyle,\r\n    'formats/color': ColorStyle,\r\n    'attributors/style/background': BackgroundStyle,\r\n    'formats/background': BackgroundStyle,\r\n  },\r\n  true\r\n);\r\n\r\nconst ALIGNS = [false, 'center', 'right', 'justify'];\r\nconst FONTS = [false, 'serif', 'monospace'];\r\nconst HEADERS = ['1', '2', '3', false];\r\nconst SIZES = ['small', false, 'large', 'huge'];\r\nconst COLORS = [\r\n  '',\r\n  'rgb(255, 255, 255)',\r\n  'rgb(0, 0, 0)',\r\n  'rgb(72, 83, 104)',\r\n  'rgb(41, 114, 244)',\r\n  'rgb(0, 163, 245)',\r\n  'rgb(49, 155, 98)',\r\n  'rgb(222, 60, 54)',\r\n  'rgb(248, 136, 37)',\r\n  'rgb(245, 196, 0)',\r\n  'rgb(153, 56, 215)',\r\n\r\n  'rgb(242, 242, 242)',\r\n  'rgb(127, 127, 127)',\r\n  'rgb(243, 245, 247)',\r\n  'rgb(229, 239, 255)',\r\n  'rgb(229, 246, 255)',\r\n  'rgb(234, 250, 241)',\r\n  'rgb(254, 233, 232)',\r\n  'rgb(254, 243, 235)',\r\n  'rgb(254, 249, 227)',\r\n  'rgb(253, 235, 255)',\r\n\r\n  'rgb(216, 216, 216)',\r\n  'rgb(89, 89, 89)',\r\n  'rgb(197, 202, 211)',\r\n  'rgb(199, 220, 255)',\r\n  'rgb(199, 236, 255)',\r\n  'rgb(195, 234, 213)',\r\n  'rgb(255, 201, 199)',\r\n  'rgb(255, 220, 196)',\r\n  'rgb(255, 238, 173)',\r\n  'rgb(242, 199, 255)',\r\n\r\n  'rgb(191, 191, 191)',\r\n  'rgb(63, 63, 63)',\r\n  'rgb(128, 139, 158)',\r\n  'rgb(153, 190, 255)',\r\n  'rgb(153, 221, 255)',\r\n  'rgb(152, 215, 182)',\r\n  'rgb(255, 156, 153)',\r\n  'rgb(255, 186, 132)',\r\n  'rgb(255, 226, 112)',\r\n  'rgb(213, 142, 255)',\r\n\r\n  'rgb(165, 165, 165)',\r\n  'rgb(38, 38, 38)',\r\n  'rgb(53, 59, 69)',\r\n  'rgb(20, 80, 184)',\r\n  'rgb(18, 116, 165)',\r\n  'rgb(39, 124, 79)',\r\n  'rgb(158, 30, 26)',\r\n  'rgb(184, 96, 20)',\r\n  'rgb(163, 130, 0)',\r\n  'rgb(94, 34, 129)',\r\n\r\n  'rgb(147, 147, 147)',\r\n  'rgb(13, 13, 13)',\r\n  'rgb(36, 39, 46)',\r\n  'rgb(12, 48, 110)',\r\n  'rgb(10, 65, 92)',\r\n  'rgb(24, 78, 50)',\r\n  'rgb(88, 17, 14)',\r\n  'rgb(92, 48, 10)',\r\n  'rgb(102, 82, 0)',\r\n  'rgb(59, 21, 81)',\r\n\r\n  'custom',\r\n];\r\n\r\nexport default class EasyColorSnowTheme extends SnowTheme {\r\n  buildPickers(selects, icons) {\r\n    this.pickers = Array.from(selects).map((select) => {\r\n      if (select.classList.contains('ql-align')) {\r\n        if (select.querySelector('option') == null) {\r\n          fillSelect(select, ALIGNS);\r\n        }\r\n        if (typeof icons.align === 'object') {\r\n          return new IconPicker(select, icons.align);\r\n        }\r\n      }\r\n      if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\r\n        const format = select.classList.contains('ql-background') ? 'background' : 'color';\r\n        if (select.querySelector('option') == null) {\r\n          fillColorSelect(select, COLORS);\r\n        }\r\n        return new EasyColorPicker(select, icons[format], this.options.themeOptions);\r\n      }\r\n      if (select.querySelector('option') == null) {\r\n        if (select.classList.contains('ql-font')) {\r\n          fillSelect(select, FONTS);\r\n        } else if (select.classList.contains('ql-header')) {\r\n          fillSelect(select, HEADERS);\r\n        } else if (select.classList.contains('ql-size')) {\r\n          fillSelect(select, SIZES);\r\n        }\r\n      }\r\n      return new Picker(select);\r\n    });\r\n    const update = () => {\r\n      this.pickers.forEach((picker) => {\r\n        if (picker instanceof EasyColorPicker && this.options?.themeOptions?.keepChooseColor) return;\r\n        picker.update();\r\n      });\r\n    };\r\n    this.quill.on(Quill.events.EDITOR_CHANGE, update);\r\n  }\r\n}\r\n\r\nfunction fillSelect(select, values, defaultValue = false) {\r\n  values.forEach((value) => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      option.setAttribute('value', value);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\nfunction fillColorSelect(select, values, format, defaultValue) {\r\n  const colorGetter = document.createElement('span');\r\n  values.forEach((value) => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      colorGetter.style[format] = value;\r\n      option.setAttribute('value', colorGetter.style[format]);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\n","import Quill from 'quill';\r\nconst BubbleTheme = Quill.import('themes/bubble');\r\nconst IconPicker = Quill.import('ui/icon-picker');\r\nconst Picker = Quill.import('ui/picker');\r\nimport EasyColorPicker from '../ui/easy-color-pick';\r\nimport { BackgroundStyle } from '../formats/background';\r\nimport { ColorStyle } from '../formats/color';\r\n\r\nQuill.register(\r\n  {\r\n    'attributors/style/color': ColorStyle,\r\n    'formats/color': ColorStyle,\r\n    'attributors/style/background': BackgroundStyle,\r\n    'formats/background': BackgroundStyle,\r\n  },\r\n  true\r\n);\r\n\r\nconst ALIGNS = [false, 'center', 'right', 'justify'];\r\nconst FONTS = [false, 'serif', 'monospace'];\r\nconst HEADERS = ['1', '2', '3', false];\r\nconst SIZES = ['small', false, 'large', 'huge'];\r\nconst COLORS = [\r\n  '',\r\n  'rgb(255, 255, 255)',\r\n  'rgb(0, 0, 0)',\r\n  'rgb(72, 83, 104)',\r\n  'rgb(41, 114, 244)',\r\n  'rgb(0, 163, 245)',\r\n  'rgb(49, 155, 98)',\r\n  'rgb(222, 60, 54)',\r\n  'rgb(248, 136, 37)',\r\n  'rgb(245, 196, 0)',\r\n  'rgb(153, 56, 215)',\r\n\r\n  'rgb(242, 242, 242)',\r\n  'rgb(127, 127, 127)',\r\n  'rgb(243, 245, 247)',\r\n  'rgb(229, 239, 255)',\r\n  'rgb(229, 246, 255)',\r\n  'rgb(234, 250, 241)',\r\n  'rgb(254, 233, 232)',\r\n  'rgb(254, 243, 235)',\r\n  'rgb(254, 249, 227)',\r\n  'rgb(253, 235, 255)',\r\n\r\n  'rgb(216, 216, 216)',\r\n  'rgb(89, 89, 89)',\r\n  'rgb(197, 202, 211)',\r\n  'rgb(199, 220, 255)',\r\n  'rgb(199, 236, 255)',\r\n  'rgb(195, 234, 213)',\r\n  'rgb(255, 201, 199)',\r\n  'rgb(255, 220, 196)',\r\n  'rgb(255, 238, 173)',\r\n  'rgb(242, 199, 255)',\r\n\r\n  'rgb(191, 191, 191)',\r\n  'rgb(63, 63, 63)',\r\n  'rgb(128, 139, 158)',\r\n  'rgb(153, 190, 255)',\r\n  'rgb(153, 221, 255)',\r\n  'rgb(152, 215, 182)',\r\n  'rgb(255, 156, 153)',\r\n  'rgb(255, 186, 132)',\r\n  'rgb(255, 226, 112)',\r\n  'rgb(213, 142, 255)',\r\n\r\n  'rgb(165, 165, 165)',\r\n  'rgb(38, 38, 38)',\r\n  'rgb(53, 59, 69)',\r\n  'rgb(20, 80, 184)',\r\n  'rgb(18, 116, 165)',\r\n  'rgb(39, 124, 79)',\r\n  'rgb(158, 30, 26)',\r\n  'rgb(184, 96, 20)',\r\n  'rgb(163, 130, 0)',\r\n  'rgb(94, 34, 129)',\r\n\r\n  'rgb(147, 147, 147)',\r\n  'rgb(13, 13, 13)',\r\n  'rgb(36, 39, 46)',\r\n  'rgb(12, 48, 110)',\r\n  'rgb(10, 65, 92)',\r\n  'rgb(24, 78, 50)',\r\n  'rgb(88, 17, 14)',\r\n  'rgb(92, 48, 10)',\r\n  'rgb(102, 82, 0)',\r\n  'rgb(59, 21, 81)',\r\n\r\n  // 'custom',\r\n];\r\n\r\nexport default class EasyColorBubbleTheme extends BubbleTheme {\r\n  buildPickers(selects, icons) {\r\n    this.pickers = Array.from(selects).map((select) => {\r\n      if (select.classList.contains('ql-align')) {\r\n        if (select.querySelector('option') == null) {\r\n          fillSelect(select, ALIGNS);\r\n        }\r\n        if (typeof icons.align === 'object') {\r\n          return new IconPicker(select, icons.align);\r\n        }\r\n      }\r\n      if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\r\n        const format = select.classList.contains('ql-background') ? 'background' : 'color';\r\n        if (select.querySelector('option') == null) {\r\n          fillColorSelect(select, COLORS);\r\n        }\r\n        return new EasyColorPicker(select, icons[format], this.options.themeOptions);\r\n      }\r\n      if (select.querySelector('option') == null) {\r\n        if (select.classList.contains('ql-font')) {\r\n          fillSelect(select, FONTS);\r\n        } else if (select.classList.contains('ql-header')) {\r\n          fillSelect(select, HEADERS);\r\n        } else if (select.classList.contains('ql-size')) {\r\n          fillSelect(select, SIZES);\r\n        }\r\n      }\r\n      return new Picker(select);\r\n    });\r\n    const update = () => {\r\n      this.pickers.forEach((picker) => {\r\n        if (picker instanceof EasyColorPicker && this.options?.themeOptions?.keepChooseColor) return;\r\n        picker.update();\r\n      });\r\n    };\r\n    this.quill.on(Quill.events.EDITOR_CHANGE, update);\r\n  }\r\n}\r\n\r\nfunction fillSelect(select, values, defaultValue = false) {\r\n  values.forEach((value) => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      option.setAttribute('value', value);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\nfunction fillColorSelect(select, values, format, defaultValue) {\r\n  const colorGetter = document.createElement('span');\r\n  values.forEach((value) => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      colorGetter.style[format] = value;\r\n      option.setAttribute('value', colorGetter.style[format]);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\n"],"names":["Picker","Quill","EasyColorPicker","_Picker$","select","label","themeOptions","_this2","_classCallCheck","_callSuper","Object","assign","localStorageKey","closeAfterChange","customColorChangeDelay","maxHistoryColor","expandIcon","keepChooseColor","innerHTML","container","classList","add","localColorUsedKey","concat","className","usedColor","JSON","parse","localStorage","getItem","Array","Error","e","setItem","createUsedColor","bindLabelEvent","expendIcon","curColor","_inherits","_createClass","key","value","_this3","this","addEventListener","close","preventDefault","selectItem","from","options","querySelectorAll","find","op","_op$dataset$value","dataset","_this4","span","document","createElement","parentNode","insertBefore","nextSibling","togglePicker","labelIcon","option","selectedIndex","item","querySelector","children","isActive","toggle","usedWrap","usedColorLabels","appendChild","i","length","createUsedColorItem","color","createUsedColorOption","buildItem","setAttribute","firstChild","findOption","remove","_this5","index","findIndex","c","repeatColor","splice","removeUsedColor","unshift","slice","map","stringify","_this6","input","fn","selectColor","delay","_this","_len","arguments","args","_key","timestamp","clearTimeout","setTimeout","apply","customColorInput","tabIndex","hasAttribute","getAttribute","textContent","_item$dataset","style","backgroundColor","trigger","undefined","colorLabel","tagName","stroke","fill","selected","_item$dataset$value","removeAttribute","dispatchEvent","Event","Parchment","BackgroundStyle","StyleAttributor","Attributor","Style","scope","Scope","INLINE","ColorStyle","SnowTheme","IconPicker","register","ALIGNS","FONTS","HEADERS","SIZES","COLORS","EasyColorSnowTheme","_SnowTheme","selects","icons","_this7","pickers","contains","fillSelect","_typeof","align","format","values","defaultValue","colorGetter","forEach","fillColorSelect","quill","on","events","EDITOR_CHANGE","picker","_this7$options","update","BubbleTheme","EasyColorBubbleTheme","_BubbleTheme","_this8","_this8$options"],"mappings":"u9DAEA,IAAMA,EAASC,EAAY,OAAC,aAEPC,WAAeC,GAClC,SAAAD,EAAYE,EAAQC,EAAOC,GAAc,IAAAC,EAAAC,OAAAN,IACvCK,EAAAE,EAAAP,KAAAA,GAAME,KACDE,aAAeI,OAAOC,OACzB,CACEC,gBAAiB,aACjBC,kBAAkB,EAClBC,uBAAwB,IACxBC,gBAAiB,GACjBC,WAAgG,qFAChGC,iBAAiB,GAEnBX,GAEFC,EAAKF,MAAMa,UAAYb,EACvBE,EAAKY,UAAUC,UAAUC,IAAI,mBAE7Bd,EAAKe,kBAAiB,GAAAC,OAAMhB,EAAKH,OAAOoB,UAAS,KAAAD,OAAIhB,EAAKD,aAAaM,iBACvE,IAEE,GADAL,EAAKkB,UAAYC,KAAKC,MAAMC,aAAaC,QAAQtB,EAAKe,sBACjDf,EAAKkB,WAAelB,EAAKkB,qBAAqBK,OACjD,MAAM,IAAIC,MAAM,2BAEnB,CAAC,MAAOC,GACPJ,aAAaK,QAAQ1B,EAAKe,kBAAmB,IAC7Cf,EAAKkB,UAAY,EAClB,CAQkB,OAPnBlB,EAAK2B,kBAED3B,EAAKD,aAAaW,kBACpBV,EAAKY,UAAUC,UAAUC,IAAI,cAC7Bd,EAAK4B,iBACL5B,EAAK6B,cAEP7B,EAAK8B,SAAW,GAAG9B,CACpB,CAAA,OAAA+B,EAAApC,EAnC0CF,GAmC1CuC,EAAArC,EAAA,CAAA,CAAAsC,IAAA,iBAAAC,MAED,WAAiB,IAAAC,EAAAC,KACfA,KAAKtC,MAAMuC,iBAAiB,aAAa,SAACZ,GACxCU,EAAKG,QACLb,EAAEc,iBACFJ,EAAKK,WACHjB,MAAMkB,KAAKN,EAAKO,QAAQC,iBAAiB,oBAAoBC,MAC3D,SAACC,GAAE,IAAAC,EAAA,OAAsBA,QAAjBA,EAACD,EAAGE,QAAQb,iBAAKY,EAAAA,EAAI,MAAQX,EAAKL,QAAQ,KAEpD,EAER,GACG,GAAA,CAAAG,IAAA,aAAAC,MAED,WAAa,IAAAc,EAAAZ,KACLa,EAAOC,SAASC,cAAc,QACpCF,EAAKpC,UAAUC,IAAI,oBACnBsB,KAAKrC,aAAaU,aAAewC,EAAKtC,UAAYyB,KAAKrC,aAAaU,YACpE2B,KAAKtC,MAAMsD,WAAWC,aAAaJ,EAAMb,KAAKtC,MAAMwD,aAEpDL,EAAKZ,iBAAiB,aAAa,WACjCW,EAAKO,cACX,IACInB,KAAKoB,UAAYP,CAClB,GAAA,CAAAhB,IAAA,SAAAC,MAED,WACE,IAAIuB,EACJ,GAAIrB,KAAKvC,OAAO6D,eAAiB,EAAG,CAClC,IAAIC,EAAOvB,KAAKxB,UAAUgD,cAAc,sBAAsBC,SAASzB,KAAKvC,OAAO6D,eACnFD,EAASrB,KAAKvC,OAAO6C,QAAQN,KAAKvC,OAAO6D,eACzCtB,KAAKI,WAAWmB,EACtB,MACMvB,KAAKI,WAAW,MAElB,IAAIsB,EAAqB,MAAVL,GAAkBA,IAAWrB,KAAKvC,OAAO+D,cAAc,oBACtExB,KAAKtC,MAAMe,UAAUkD,OAAO,YAAaD,GAGzC1B,KAAKoB,WAAapB,KAAKoB,UAAU3C,UAAUkD,OAAO,YAAaD,EAChE,GAAA,CAAA7B,IAAA,kBAAAC,MAED,WACE,IAAM8B,EAAWd,SAASC,cAAc,OACxCa,EAASnD,UAAUC,IAAI,QAEvB,IAAMmD,EAAkBf,SAASC,cAAc,OAC/Cc,EAAgBpD,UAAUC,IAAI,aAC9BkD,EAASE,YAAYD,GACrB7B,KAAKM,QAAQwB,YAAYF,GACzB5B,KAAK6B,gBAAkBA,EACvB,IAAK,IAAIE,EAAI/B,KAAKlB,UAAUkD,OAAS,EAAGD,GAAK,EAAGA,IAC9C/B,KAAKiC,oBAAoBjC,KAAKlB,UAAUiD,GAE3C,GAAA,CAAAlC,IAAA,sBAAAC,MAED,SAAoBoC,GAClB,IAAMb,EAASrB,KAAKmC,sBAAsBD,GAC1ClC,KAAKvC,OAAOqE,YAAYT,GACxB,IAAM3D,EAAQsC,KAAKoC,UAAUf,GAC7B3D,EAAM2E,aAAa,SAAU,IAC7BrC,KAAK6B,gBAAgBZ,aAAavD,EAAOsC,KAAK6B,gBAAgBS,WAC/D,GAAA,CAAAzC,IAAA,wBAAAC,MAED,SAAsBoC,GACpB,IAAMK,EAAavC,KAAKvC,OAAO+D,cAAa,iBAAA5C,OAAkBsD,EAAK,eACnE,GAAIK,EACF,OAAOA,EAET,IAAMlB,EAASP,SAASC,cAAc,UAGtC,OAFAM,EAAOgB,aAAa,SAAU,IAC9BhB,EAAOgB,aAAa,QAASH,GACtBb,CACR,GAAA,CAAAxB,IAAA,kBAAAC,MAED,SAAgBoC,GACd,IAAMb,EAASrB,KAAKvC,OAAO+D,cAAa,iBAAA5C,OAAkBsD,EAAK,eACzDxE,EAAQsC,KAAKM,QAAQkB,cAAa,iBAAA5C,OAAkBsD,EAAK,eAC/Db,GAAUA,EAAOmB,SACjB9E,GAASA,EAAM8E,QAChB,GAAA,CAAA3C,IAAA,cAAAC,MAED,SAAYoC,GAAO,IAAAO,EAAAzC,KACjB,GAAKkC,EAAL,CACA,IAAMQ,EAAQ1C,KAAKlB,UAAU6D,WAAU,SAACC,GAAC,OAAKA,IAAMV,CAAK,IACzD,IAAe,IAAXQ,EAAc,CAChB,IAAMG,EAAc7C,KAAKlB,UAAUgE,OAAOJ,EAAO,GACjD1C,KAAK+C,gBAAgBF,EACtB,CACD7C,KAAKlB,UAAUkE,QAAQd,GACFlC,KAAKlB,UAAUmE,MAAMjD,KAAKrC,aAAaS,iBAC/C8E,KAAI,SAAChB,GAAK,OAAKO,EAAKM,gBAAgBb,EAAM,IACvDlC,KAAKlB,UAAYkB,KAAKlB,UAAUmE,MAAM,EAAGjD,KAAKrC,aAAaS,iBAC3Da,aAAaK,QAAQU,KAAKrB,kBAAmBI,KAAKoE,UAAUnD,KAAKlB,YACjEkB,KAAKiC,oBAAoBC,EAXb,CAYb,GAAA,CAAArC,IAAA,YAAAC,MAED,SAAUuB,GAAQ,IAAA+B,EAAApD,KAChB,GAAqB,WAAjBqB,EAAOvB,MAAoB,CAC7B,IAAMyB,EAAOT,SAASC,cAAc,OAC9BsC,EAAQvC,SAASC,cAAc,SAarC,OAZAQ,EAAK9C,UAAUC,IAAI,UACnB2E,EAAMhB,aAAa,OAAQ,SAC3Bd,EAAKO,YAAYuB,GAEjBA,EAAMpD,iBACJ,SClJiBqD,EDmJR,WACPF,EAAKG,YAAYF,EAAMvD,OACvBsD,EAAKhD,WAAWgD,EAAK9C,QAAQkB,cAAa,iBAAA5C,OAAkByE,EAAMvD,cAAY,EAC/E,ECtJoB0D,EDsJlB,ICpJF,WAAmB,IAAA,IAAAC,EAAAzD,KAAA0D,EAAAC,UAAA3B,OAAN4B,EAAIzE,IAAAA,MAAAuE,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAJD,EAAIC,GAAAF,UAAAE,GAClBC,GACFC,aAAaD,GAEfA,EAAYE,YAAW,WACrBV,EAAGW,MAAMR,EAAMG,EAChB,GAAEJ,EACP,ID+IMxD,KAAKkE,iBAAmBb,EACjB9B,CACb,CACM,IC3JmB+B,EAAIE,EACvBM,ED0JMvC,EAAOT,SAASC,cAAc,KAmBpC,OAlBAQ,EAAK4C,SAAW,IAChB5C,EAAKc,aAAa,OAAQ,UAC1Bd,EAAK9C,UAAUC,IAAI,kBACd2C,EAAOvB,OACVyB,EAAK9C,UAAUC,IAAI,SAEjB2C,EAAO+C,aAAa,UACtB7C,EAAKc,aAAa,aAAchB,EAAOgD,aAAa,UAElDhD,EAAOiD,aACT/C,EAAKc,aAAa,aAAchB,EAAOiD,aAEzC/C,EAAKtB,iBAAiB,SAAS,WAAM,IAAAsE,EACnCnB,EAAKG,YAAYhC,SAAagD,QAATA,EAAJhD,EAAMZ,mBAAO4D,SAAbA,EAAezE,OAChCsD,EAAKhD,WAAWmB,GAAM,EAC9B,IAEMA,EAAKiD,MAAMC,gBAAkBpD,EAAOgD,aAAa,UAAY,GACtD9C,CAEV,GAAA,CAAA1B,IAAA,aAAAC,MAED,SAAWyB,GAAuB,IAAjBmD,EAAOf,UAAA3B,OAAA,QAAA2C,IAAAhB,UAAA,IAAAA,UAAA,GAChB7D,EAAQyB,GAAOA,EAAK8C,aAAa,eAAsB,GACvDO,EAAa5E,KAAKtC,MAAM8D,cAAc,mBACxCoD,IACyB,SAAvBA,EAAWC,QACbD,EAAWJ,MAAMM,OAAShF,EAE1B8E,EAAWJ,MAAMO,KAAOjF,GAI5BE,KAAKN,SAAWI,EAEhB,IAAMkF,EAAWhF,KAAKxB,UAAUgD,cAAc,gBAE9B,MAAZwD,GACFA,EAASvG,UAAU+D,OAAO,eAEhB,MAARjB,IACJA,EAAK9C,UAAUC,IAAI,eAEnBsB,KAAKvC,OAAO6D,cAAgBnC,MAAMkB,KAAKL,KAAKvC,OAAOgE,UAAUkB,WAC3D,SAACtB,GAAM,IAAA4D,EAAA,OAAK5D,EAAOvB,SAA6BmF,QAAxBA,EAAM1D,EAAKZ,QAAQb,iBAAKmF,EAAAA,EAAI,GAAG,IAGrD1D,EAAK6C,aAAa,cACpBpE,KAAKtC,MAAM2E,aAAa,aAAcd,EAAK8C,aAAa,eAExDrE,KAAKtC,MAAMwH,gBAAgB,cAEzB3D,EAAK6C,aAAa,cACpBpE,KAAKtC,MAAM2E,aAAa,aAAcd,EAAK8C,aAAa,eAExDrE,KAAKtC,MAAMwH,gBAAgB,cAGzBR,IACF1E,KAAKvC,OAAO0H,cAAc,IAAIC,MAAM,WACpCpF,KAAKrC,aAAaO,kBAAoB8B,KAAKE,SAE9C,IAAA,IEzNGmF,EAAY/H,EAAY,OAAC,aAGzBgI,EAAkB,IADND,EAAUE,iBAAmBF,EAAUG,WAAWC,OAC9B,aAAc,mBAAoB,CACtEC,MAAOL,EAAUM,MAAMC,SCJnBP,EAAY/H,EAAY,OAAC,aAGzBuI,EAAa,IADDR,EAAUE,iBAAmBF,EAAUG,WAAWC,OACnC,QAAS,QAAS,CACjDC,MAAOL,EAAUM,MAAMC,SCJnBE,EAAYxI,EAAY,OAAC,eACzByI,EAAazI,EAAY,OAAC,kBAC1BD,EAASC,EAAY,OAAC,aAK5BA,EAAM0I,SACJ,CACE,0BAA2BH,EAC3B,gBAAiBA,EACjB,+BAAgCP,EAChC,qBAAsBA,IAExB,GAGF,IAAMW,EAAS,EAAC,EAAO,SAAU,QAAS,WACpCC,EAAQ,EAAC,EAAO,QAAS,aACzBC,EAAU,CAAC,IAAK,IAAK,KAAK,GAC1BC,EAAQ,CAAC,SAAS,EAAO,QAAS,QAClCC,EAAS,CACb,GACA,qBACA,eACA,mBACA,oBACA,mBACA,mBACA,mBACA,oBACA,mBACA,oBAEA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,qBACA,kBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,qBACA,kBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,qBACA,kBACA,kBACA,mBACA,oBACA,mBACA,mBACA,mBACA,mBACA,mBAEA,qBACA,kBACA,kBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBAEA,UAGmBC,WAAkBC,GAAA,SAAAD,IAAA,OAAAzI,OAAAyI,GAAAxI,EAAAkC,KAAAsG,EAAA3C,UAAA,CAAA,OAAAhE,EAAA2G,EAASR,GAATlG,EAAA0G,EAAA,CAAA,CAAAzG,IAAA,eAAAC,MACrC,SAAa0G,EAASC,GAAO,IAAAC,EAAA1G,KAC3BA,KAAK2G,QAAUxH,MAAMkB,KAAKmG,GAAStD,KAAI,SAACzF,GACtC,GAAIA,EAAOgB,UAAUmI,SAAS,cACU,MAAlCnJ,EAAO+D,cAAc,WACvBqF,EAAWpJ,EAAQwI,GAEM,WAAvBa,EAAOL,EAAMM,QACf,OAAO,IAAIhB,EAAWtI,EAAQgJ,EAAMM,OAGxC,GAAItJ,EAAOgB,UAAUmI,SAAS,kBAAoBnJ,EAAOgB,UAAUmI,SAAS,YAAa,CACvF,IAAMI,EAASvJ,EAAOgB,UAAUmI,SAAS,iBAAmB,aAAe,QAI3E,OAHsC,MAAlCnJ,EAAO+D,cAAc,WAqCjC,SAAyB/D,EAAQwJ,EAAQD,EAAQE,GAC/C,IAAMC,EAAcrG,SAASC,cAAc,QAC3CkG,EAAOG,SAAQ,SAACtH,GACd,IAAMuB,EAASP,SAASC,cAAc,UAClCjB,IAAUoH,EACZ7F,EAAOgB,aAAa,WAAY,aAEhC8E,EAAY3C,MAAMwC,GAAUlH,EAC5BuB,EAAOgB,aAAa,QAAS8E,EAAY3C,MAAMwC,KAEjDvJ,EAAOqE,YAAYT,EACvB,GACA,CAhDUgG,CAAgB5J,EAAQ4I,GAEnB,IAAI9I,EAAgBE,EAAQgJ,EAAMO,GAASN,EAAKpG,QAAQ3C,aAChE,CAUD,OATsC,MAAlCF,EAAO+D,cAAc,YACnB/D,EAAOgB,UAAUmI,SAAS,WAC5BC,EAAWpJ,EAAQyI,GACVzI,EAAOgB,UAAUmI,SAAS,aACnCC,EAAWpJ,EAAQ0I,GACV1I,EAAOgB,UAAUmI,SAAS,YACnCC,EAAWpJ,EAAQ2I,IAGhB,IAAI/I,EAAOI,EACxB,IAOIuC,KAAKsH,MAAMC,GAAGjK,EAAMkK,OAAOC,eANZ,WACbf,EAAKC,QAAQS,SAAQ,SAACM,GAAW,IAAAC,EAC3BD,aAAkBnK,GAA+BoK,QAAhBA,EAAIjB,EAAKpG,mBAAOqH,GAAc,QAAdA,EAAZA,EAAchK,oBAAdgK,IAA0BA,GAA1BA,EAA4BrJ,iBACrEoJ,EAAOE,QACf,GACA,GAEG,IAAA,IAGH,SAASf,EAAWpJ,EAAQwJ,GAA8B,IAAtBC,EAAYvD,UAAA3B,OAAA,QAAA2C,IAAAhB,UAAA,IAAAA,UAAA,GAC9CsD,EAAOG,SAAQ,SAACtH,GACd,IAAMuB,EAASP,SAASC,cAAc,UAClCjB,IAAUoH,EACZ7F,EAAOgB,aAAa,WAAY,YAEhChB,EAAOgB,aAAa,QAASvC,GAE/BrC,EAAOqE,YAAYT,EACvB,GACA,CC7IA,IAAMwG,EAAcvK,EAAY,OAAC,iBAC3ByI,EAAazI,EAAY,OAAC,kBAC1BD,EAASC,EAAY,OAAC,aAK5BA,EAAM0I,SACJ,CACE,0BAA2BH,EAC3B,gBAAiBA,EACjB,+BAAgCP,EAChC,qBAAsBA,IAExB,GAGF,IAAMW,EAAS,EAAC,EAAO,SAAU,QAAS,WACpCC,EAAQ,EAAC,EAAO,QAAS,aACzBC,EAAU,CAAC,IAAK,IAAK,KAAK,GAC1BC,EAAQ,CAAC,SAAS,EAAO,QAAS,QAClCC,EAAS,CACb,GACA,qBACA,eACA,mBACA,oBACA,mBACA,mBACA,mBACA,oBACA,mBACA,oBAEA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,qBACA,kBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,qBACA,kBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,qBACA,kBACA,kBACA,mBACA,oBACA,mBACA,mBACA,mBACA,mBACA,mBAEA,qBACA,kBACA,kBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBAKmByB,WAAoBC,GAAA,SAAAD,IAAA,OAAAjK,OAAAiK,GAAAhK,EAAAkC,KAAA8H,EAAAnE,UAAA,CAAA,OAAAhE,EAAAmI,EAASD,GAATjI,EAAAkI,EAAA,CAAA,CAAAjI,IAAA,eAAAC,MACvC,SAAa0G,EAASC,GAAO,IAAAuB,EAAAhI,KAC3BA,KAAK2G,QAAUxH,MAAMkB,KAAKmG,GAAStD,KAAI,SAACzF,GACtC,GAAIA,EAAOgB,UAAUmI,SAAS,cACU,MAAlCnJ,EAAO+D,cAAc,WACvBqF,EAAWpJ,EAAQwI,GAEM,WAAvBa,EAAOL,EAAMM,QACf,OAAO,IAAIhB,EAAWtI,EAAQgJ,EAAMM,OAGxC,GAAItJ,EAAOgB,UAAUmI,SAAS,kBAAoBnJ,EAAOgB,UAAUmI,SAAS,YAAa,CACvF,IAAMI,EAASvJ,EAAOgB,UAAUmI,SAAS,iBAAmB,aAAe,QAI3E,OAHsC,MAAlCnJ,EAAO+D,cAAc,WAqCjC,SAAyB/D,EAAQwJ,EAAQD,EAAQE,GAC/C,IAAMC,EAAcrG,SAASC,cAAc,QAC3CkG,EAAOG,SAAQ,SAACtH,GACd,IAAMuB,EAASP,SAASC,cAAc,UAClCjB,IAAUoH,EACZ7F,EAAOgB,aAAa,WAAY,aAEhC8E,EAAY3C,MAAMwC,GAAUlH,EAC5BuB,EAAOgB,aAAa,QAAS8E,EAAY3C,MAAMwC,KAEjDvJ,EAAOqE,YAAYT,EACvB,GACA,CAhDUgG,CAAgB5J,EAAQ4I,GAEnB,IAAI9I,EAAgBE,EAAQgJ,EAAMO,GAASgB,EAAK1H,QAAQ3C,aAChE,CAUD,OATsC,MAAlCF,EAAO+D,cAAc,YACnB/D,EAAOgB,UAAUmI,SAAS,WAC5BC,EAAWpJ,EAAQyI,GACVzI,EAAOgB,UAAUmI,SAAS,aACnCC,EAAWpJ,EAAQ0I,GACV1I,EAAOgB,UAAUmI,SAAS,YACnCC,EAAWpJ,EAAQ2I,IAGhB,IAAI/I,EAAOI,EACxB,IAOIuC,KAAKsH,MAAMC,GAAGjK,EAAMkK,OAAOC,eANZ,WACbO,EAAKrB,QAAQS,SAAQ,SAACM,GAAW,IAAAO,EAC3BP,aAAkBnK,GAA+B0K,QAAhBA,EAAID,EAAK1H,mBAAO2H,GAAc,QAAdA,EAAZA,EAActK,oBAAdsK,IAA0BA,GAA1BA,EAA4B3J,iBACrEoJ,EAAOE,QACf,GACA,GAEG,IAAA,IAGH,SAASf,EAAWpJ,EAAQwJ,GAA8B,IAAtBC,EAAYvD,UAAA3B,OAAA,QAAA2C,IAAAhB,UAAA,IAAAA,UAAA,GAC9CsD,EAAOG,SAAQ,SAACtH,GACd,IAAMuB,EAASP,SAASC,cAAc,UAClCjB,IAAUoH,EACZ7F,EAAOgB,aAAa,WAAY,YAEhChB,EAAOgB,aAAa,QAASvC,GAE/BrC,EAAOqE,YAAYT,EACvB,GACA"}