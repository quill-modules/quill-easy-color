{"version":3,"file":"index.js","sources":["../src/utils/bem.js","../src/utils/color-picker.js","../src/ui/easy-color-pick.js","../src/utils/debounce.js","../src/formats/background.js","../src/formats/color.js","../src/theme/easy-color-snow.js","../src/theme/easy-color-bubble.js"],"sourcesContent":["export const createBEM = (b, n = 'jsf') => {\r\n  const prefix = n ? `${n}-` : '';\r\n  return {\r\n    /** n-b */\r\n    b: () => `${prefix}${b}`,\r\n    /** n-b__e */\r\n    be: (e) => e ? `${prefix}${b}__${e}` : '',\r\n    /** n-b--m */\r\n    bm: (m) => m ? `${prefix}${b}--${m}` : '',\r\n    /** n-b__e--m */\r\n    bem: (e, m) => e && m ? `${prefix}${b}__${e}--${m}` : '',\r\n    /** n-s */\r\n    ns: (s) => s ? `${prefix}${s}` : '',\r\n    /** n-b-s */\r\n    bs: (s) => s ? `${prefix}${b}-${s}` : '',\r\n    /** --n-v */\r\n    cv: (v) => v ? `--${prefix}${v}` : '',\r\n    /** is-n */\r\n    is: (n) => `is-${n}`,\r\n  };\r\n};\r\n","import { createBEM } from './bem'\r\nconst normalizeValue = function (value, max) {\r\n  value = Math.min(max, Math.max(0, Number.parseFloat(`${value}`)));\r\n\r\n  // Handle floating point rounding errors\r\n  if (Math.abs(value - (max)) < 0.000_001) {\r\n    return 1;\r\n  }\r\n\r\n  // Convert into [0, 1] range if it isn't already\r\n  return (value % (max)) / Number.parseFloat(max);\r\n};\r\nexport const validateHSB = (hsb) => {\r\n  return {\r\n    h: Math.min(360, Math.max(0, hsb.h)),\r\n    s: Math.min(100, Math.max(0, hsb.s)),\r\n    b: Math.min(100, Math.max(0, hsb.b)),\r\n    a: Math.min(1, Math.max(0, hsb.a)),\r\n  };\r\n};\r\nexport const HEXtoRGB = (hex) => {\r\n  hex = hex.startsWith('#') ? hex.slice(1) : hex;\r\n  const r = Number.parseInt(hex.slice(0, 2), 16);\r\n  const g = Number.parseInt(hex.slice(2, 4), 16);\r\n  const b = Number.parseInt(hex.slice(4, 6), 16);\r\n  const a = Number((Number.parseInt(hex.slice(6, 8) || 'ff', 16) / 255).toFixed(2));\r\n  return { r, g, b, a };\r\n};\r\nexport const RGBtoHSB = (rgb) => {\r\n  let { r, g, b, a } = rgb;\r\n  r = normalizeValue(r, 255);\r\n  g = normalizeValue(g, 255);\r\n  b = normalizeValue(b, 255);\r\n\r\n  const max = Math.max(r, g, b);\r\n  const min = Math.min(r, g, b);\r\n  let h;\r\n  const v = max;\r\n\r\n  const d = max - min;\r\n  const s = max === 0 ? 0 : d / max;\r\n\r\n  if (max === min) {\r\n    h = 0; // achromatic\r\n  }\r\n  else {\r\n    switch (max) {\r\n      case r: {\r\n        h = (g - b) / d + (g < b ? 6 : 0);\r\n        break;\r\n      }\r\n      case g: {\r\n        h = (b - r) / d + 2;\r\n        break;\r\n      }\r\n      case b: {\r\n        h = (r - g) / d + 4;\r\n        break;\r\n      }\r\n    }\r\n    h /= 6;\r\n  }\r\n\r\n  return { h: h * 360, s: s * 100, b: v * 100, a };\r\n};\r\nexport const HSBtoRGB = (hsb) => {\r\n  let { h, s, b, a } = hsb;\r\n  h = normalizeValue(h, 360) * 6;\r\n  s = normalizeValue(s, 100);\r\n  b = normalizeValue(b, 100);\r\n\r\n  const i = Math.floor(h);\r\n  const f = h - i;\r\n  const p = b * (1 - s);\r\n  const q = b * (1 - f * s);\r\n  const t = b * (1 - (1 - f) * s);\r\n  const mod = i % 6;\r\n  const r = [b, q, p, p, t, b][mod];\r\n  const g = [t, b, b, q, p, p][mod];\r\n  const v = [p, p, t, b, b, q][mod];\r\n\r\n  return {\r\n    r: Math.round(r * 255),\r\n    g: Math.round(g * 255),\r\n    b: Math.round(v * 255),\r\n    a,\r\n  };\r\n};\r\nexport const RGBtoHEX = (rgb) => {\r\n  const hex = [rgb.r.toString(16), rgb.g.toString(16), rgb.b.toString(16), Math.round(rgb.a * 255).toString(16)];\r\n  for (const key in hex) {\r\n    if (hex[key].length === 1) {\r\n      hex[key] = `0${hex[key]}`;\r\n    }\r\n  }\r\n  return hex.join('');\r\n};\r\nexport const HSBtoHEX = (hsb) => RGBtoHEX(HSBtoRGB(hsb));\r\nexport const RGBStringtoRGB = (colorString) => {\r\n  colorString = colorString.replace(/\\s+/g, '');\r\n\r\n  const match = colorString.match(/rgba?\\((\\d+),(\\d+),(\\d+)(?:,([\\d.]+))?\\)/);\r\n  if (!match) {\r\n    console.warn(`Invalid color input`);\r\n    return { a: 1, r: 0, g: 0, b: 0 }\r\n  }\r\n\r\n  const r = parseInt(match[1], 10);\r\n  const g = parseInt(match[2], 10);\r\n  const b = parseInt(match[3], 10);\r\n  const a = match[4] ? parseFloat(match[4]) : 1;\r\n\r\n  return { a, r, g, b };\r\n}\r\nexport const isLightColor = (rgb) => {\r\n  const { r, g, b } = rgb;\r\n  const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\r\n  return luminance > 0.5;\r\n};\r\nexport const colortoRGB = (color) => {\r\n  const span = document.createElement('span');\r\n  span.style.backgroundColor = color;\r\n  return RGBStringtoRGB(span.style.backgroundColor);\r\n}\r\n\r\nexport const createColorPicker = (options = {}) => {\r\n  const contentWidth = 230;\r\n  const contentHeight = 150;\r\n  const handleSizeSec = 10;\r\n\r\n  let hsbValue = RGBtoHSB(HEXtoRGB(options.color || '#ff0000'));\r\n  const bem = createBEM('color-picker');\r\n  const root = document.createElement('div');\r\n  root.classList.add(bem.b());\r\n\r\n  const content = document.createElement('div');\r\n  content.classList.add(bem.be('content'));\r\n\r\n  const colorSelector = document.createElement('div');\r\n  colorSelector.classList.add(bem.be('selector'));\r\n\r\n  const colorBackground = document.createElement('div');\r\n  colorBackground.classList.add(bem.be('background'));\r\n  colorSelector.appendChild(colorBackground);\r\n\r\n  const colorHandle = document.createElement('div');\r\n  colorHandle.classList.add(bem.be('background-handle'));\r\n  colorBackground.appendChild(colorHandle);\r\n\r\n  const colorAlpha = document.createElement('div');\r\n  colorAlpha.classList.add(bem.be('alpha'));\r\n\r\n  const alphaBg = document.createElement('div');\r\n  alphaBg.classList.add(bem.be('alpha-bg'));\r\n\r\n  const alphaHandle = document.createElement('div');\r\n  alphaHandle.classList.add(bem.be('alpha-handle'));\r\n\r\n  colorAlpha.appendChild(alphaBg);\r\n  colorAlpha.appendChild(alphaHandle);\r\n\r\n  const colorHue = document.createElement('div');\r\n  colorHue.classList.add(bem.be('hue'));\r\n\r\n  const colorHueHandle = document.createElement('div');\r\n  colorHueHandle.classList.add(bem.be('hue-handle'));\r\n  colorHue.appendChild(colorHueHandle);\r\n\r\n  const action = document.createElement('div');\r\n  action.classList.add(bem.be('action'));\r\n\r\n  const [colorRInput, colorGInput, colorBInput, colorAInput] = (['r', 'g', 'b', 'a']).map((key) => {\r\n    const item = document.createElement('div');\r\n    item.classList.add(bem.be('action-item'), key);\r\n\r\n    const label = document.createElement('label');\r\n    label.textContent = key.toUpperCase();\r\n\r\n    const colorInput = document.createElement('input');\r\n    colorInput.classList.add(bem.be('input'));\r\n\r\n    colorInput.addEventListener('input', () => {\r\n      colorInput.value = colorInput.value.replaceAll(/[^0-9]/g, '');\r\n    });\r\n    colorInput.addEventListener('change', () => {\r\n      let value = Math.round(Number(colorInput.value));\r\n      if (key === 'a') {\r\n        value = value / 100;\r\n      }\r\n      const result = validateHSB(RGBtoHSB(Object.assign({}, HSBtoRGB(hsbValue), { [key]: value })));\r\n      updateValue(result);\r\n      updateUI();\r\n    });\r\n\r\n    item.appendChild(label);\r\n    item.appendChild(colorInput);\r\n    action.appendChild(item);\r\n\r\n    return colorInput;\r\n  });\r\n\r\n  content.appendChild(colorHue);\r\n  content.appendChild(colorSelector);\r\n  content.appendChild(colorAlpha);\r\n  root.appendChild(content);\r\n  root.appendChild(action);\r\n\r\n  let colorDragging = false;\r\n  let hueDragging = false;\r\n  let alphaDragging = false;\r\n\r\n  function updateInput() {\r\n    const hex = HSBtoHEX(hsbValue);\r\n    for (const [i, input] of [colorRInput, colorGInput, colorBInput].entries()) {\r\n      input.value = String(Number.parseInt(hex[i * 2] + hex[i * 2 + 1], 16));\r\n    }\r\n    colorAInput.value = String((hsbValue.a * 100).toFixed(0));\r\n  }\r\n  function updateColorHandle() {\r\n    Object.assign(colorHandle.style, {\r\n      left: `${Math.floor((contentWidth * hsbValue.s) / 100)}px`,\r\n      top: `${Math.floor((contentHeight * (100 - hsbValue.b)) / 100)}px`,\r\n    });\r\n  }\r\n  function updateColorSelector() {\r\n    colorSelector.style.backgroundColor = `#${RGBtoHEX(HSBtoRGB({\r\n      h: hsbValue.h,\r\n      s: 100,\r\n      b: 100,\r\n      a: 1,\r\n    }))}`;\r\n  }\r\n  function updateHue() {\r\n    colorHueHandle.style.top = `${Math.floor(contentHeight - (contentHeight * hsbValue.h) / 360)}px`;\r\n  }\r\n  function updateAlphaHandle() {\r\n    alphaHandle.style.left = `${hsbValue.a * 100}%`;\r\n  }\r\n  function updateAlphaBg() {\r\n    const { r, g, b } = HSBtoRGB(hsbValue);\r\n    alphaBg.style.background = `linear-gradient(to right, rgba(${r}, ${g}, ${b}, 0) 0%, rgba(${r}, ${g}, ${b}, 1) 100%)`;\r\n  }\r\n  function updateUI() {\r\n    updateColorHandle();\r\n    updateColorSelector();\r\n    updateHue();\r\n    updateAlphaHandle();\r\n    updateAlphaBg();\r\n    updateInput();\r\n  }\r\n  function updateValue(value) {\r\n    hsbValue = validateHSB(Object.assign({}, hsbValue, value));\r\n\r\n    updateInput();\r\n\r\n    if (options.onChange) {\r\n      options.onChange(`#${HSBtoHEX(hsbValue)}`);\r\n    }\r\n  }\r\n\r\n  function pickColor(event) {\r\n    const rect = colorSelector.getBoundingClientRect();\r\n    const top = rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n    const left = rect.left + document.body.scrollLeft;\r\n    const saturation = Math.floor((100 * Math.max(0, Math.min(contentWidth, event.pageX - left))) / contentWidth);\r\n    const brightness = Math.floor((100 * (contentHeight - Math.max(0, Math.min(contentHeight, event.pageY - top)))) / contentHeight);\r\n\r\n    updateValue({\r\n      s: saturation,\r\n      b: brightness,\r\n    });\r\n    updateUI();\r\n  }\r\n  function pickHue(event) {\r\n    const top = colorHue.getBoundingClientRect().top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n\r\n    updateValue({\r\n      h: Math.floor((360 * (contentHeight - Math.max(0, Math.min(contentHeight, event.pageY - top)))) / contentHeight),\r\n    });\r\n    updateUI();\r\n  }\r\n  function pickAlpha(event) {\r\n    const { pageX } = event;\r\n    const rect = colorAlpha.getBoundingClientRect();\r\n    let left = pageX - rect.left;\r\n    left = Math.max(handleSizeSec / 2, left);\r\n    left = Math.min(left, rect.width - handleSizeSec / 2);\r\n\r\n    updateValue({\r\n      a: Math.round(((left - 10 / 2) / (rect.width - 10)) * 100) / 100,\r\n    });\r\n    updateUI();\r\n  }\r\n\r\n  function onDrag(event) {\r\n    if (colorDragging) {\r\n      event.preventDefault();\r\n      pickColor(event);\r\n    }\r\n\r\n    if (hueDragging) {\r\n      event.preventDefault();\r\n      pickHue(event);\r\n    }\r\n\r\n    if (alphaDragging) {\r\n      event.preventDefault();\r\n      pickAlpha(event);\r\n    }\r\n  }\r\n\r\n  function onColorSelectorDragEnd() {\r\n    document.removeEventListener('mousemove', onDrag);\r\n    document.removeEventListener('mouseup', onColorSelectorDragEnd);\r\n    colorDragging = false;\r\n  }\r\n  function onColorSelectorMousedown(e) {\r\n    document.addEventListener('mousemove', onDrag);\r\n    document.addEventListener('mouseup', onColorSelectorDragEnd);\r\n    colorDragging = true;\r\n    pickColor(e);\r\n  }\r\n  colorSelector.addEventListener('mousedown', onColorSelectorMousedown);\r\n\r\n  function onColorHueDragEnd() {\r\n    document.removeEventListener('mousemove', onDrag);\r\n    document.removeEventListener('mouseup', onColorHueDragEnd);\r\n    hueDragging = false;\r\n  }\r\n  function onColorHueMousedown(event) {\r\n    document.addEventListener('mousemove', onDrag);\r\n    document.addEventListener('mouseup', onColorHueDragEnd);\r\n    hueDragging = true;\r\n    pickHue(event);\r\n  }\r\n  colorHue.addEventListener('mousedown', onColorHueMousedown);\r\n\r\n  function onColorAlphaDragEnd() {\r\n    document.removeEventListener('mousemove', onDrag);\r\n    document.removeEventListener('mouseup', onColorAlphaDragEnd);\r\n    alphaDragging = false;\r\n  }\r\n  function onColorAlphaMousedown(event) {\r\n    document.addEventListener('mousemove', onDrag);\r\n    document.addEventListener('mouseup', onColorAlphaDragEnd);\r\n    alphaDragging = true;\r\n    pickAlpha(event);\r\n  }\r\n  colorAlpha.addEventListener('mousedown', onColorAlphaMousedown);\r\n\r\n  updateUI();\r\n  return root;\r\n};","import Quill from 'quill';\nimport { createColorPicker, debounce, HEXtoRGB, isLightColor, colortoRGB } from '../utils';\nconst Picker = Quill.import('ui/picker');\n\nexport default class EasyColorPicker extends Picker {\n  static clearText = 'Remove color';\n  static customText = 'Color picker';\n  currentIndex = -1;\n\n  get statics() {\n    return this.constructor;\n  }\n  constructor(select, label, themeOptions) {\n    super(select);\n    this.themeOptions = Object.assign(\n      {\n        localStorageKey: 'used-color',\n        closeAfterChange: true,\n        customColorChangeDelay: 300,\n        maxHistoryColor: 10,\n        expandIcon: `<svg viewBox=\"0 0 32 32\"><path fill=\"currentColor\" d=\"m24 12l-8 10l-8-10z\"/></svg>`,\n        keepChooseColor: true,\n      },\n      themeOptions\n    );\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n\n    this.localColorUsedKey = `${this.select.className}-${this.themeOptions.localStorageKey}`;\n    try {\n      this.usedColor = JSON.parse(localStorage.getItem(this.localColorUsedKey));\n      if (!this.usedColor || !(this.usedColor instanceof Array)) {\n        throw new Error('usedColor get wrong type');\n      }\n    } catch (e) {\n      localStorage.setItem(this.localColorUsedKey, []);\n      this.usedColor = [];\n    }\n    this.createUsedColor();\n\n    if (this.themeOptions.keepChooseColor) {\n      this.container.classList.add('keep-color');\n      this.bindLabelEvent();\n      this.expendIcon();\n    }\n    this.curColor = '';\n  }\n\n  bindLabelEvent() {\n    this.label.addEventListener('mousedown', (e) => {\n      this.close();\n      e.preventDefault();\n      this.selectItem(\n        Array.from(this.options.querySelectorAll('.ql-picker-item')).find(\n          (op) => (op.dataset.value ?? '') === this.curColor\n        ),\n        true\n      );\n    });\n  }\n\n  expendIcon() {\n    const span = document.createElement('span');\n    span.classList.add('ql-picker-expand');\n    this.themeOptions.expandIcon && (span.innerHTML = this.themeOptions.expandIcon);\n    this.label.parentNode.insertBefore(span, this.label.nextSibling);\n\n    span.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.labelIcon = span;\n  }\n\n  update() {\n    let option;\n    if (this.currentIndex > -1) {\n      let item = this.container.querySelectorAll('.ql-picker-item')[this.currentIndex];\n      option = this.select.options[this.currentIndex];\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    let isActive = option != null && option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n    // 上面代码没有更改, 继承自 quill/ui/picker 主要是需要使用到 isActive\n    // 使展开 icon 与图标 icon 同背景和颜色\n    this.labelIcon && this.labelIcon.classList.toggle('ql-active', isActive);\n  }\n\n  createUsedColor() {\n    const usedWrap = document.createElement('div');\n    usedWrap.classList.add('used');\n\n    const usedColorLabels = document.createElement('div');\n    usedColorLabels.classList.add('used-list');\n    usedWrap.appendChild(usedColorLabels);\n    this.options.appendChild(usedWrap);\n    this.usedColorLabels = usedColorLabels;\n    for (let i = this.usedColor.length - 1; i >= 0; i--) {\n      this.createUsedColorItem(this.usedColor[i]);\n    }\n  }\n\n  createUsedColorItem(color) {\n    const option = this.createUsedColorOption(color);\n    this.select.appendChild(option);\n    const label = this.buildItem(option);\n    label.setAttribute('custom', '');\n    this.usedColorLabels.appendChild(label);\n  }\n\n  createUsedColorOption(color) {\n    const findOption = this.select.querySelector(`option[value='${color}'][custom]`);\n    if (findOption) {\n      return findOption;\n    }\n    const option = document.createElement('option');\n    option.setAttribute('custom', '');\n    option.setAttribute('value', color);\n    return option;\n  }\n\n  removeUsedColor(color) {\n    const option = this.select.querySelector(`option[value='${color}'][custom]`);\n    const label = this.options.querySelector(`p[data-value='${color}'][custom]`);\n    option && option.remove();\n    label && label.remove();\n  }\n\n  selectColor(color) {\n    if (!color) return;\n    const index = this.usedColor.findIndex((c) => c === color);\n    if (index !== -1) {\n      const repeatColor = this.usedColor.splice(index, 1);\n      this.removeUsedColor(repeatColor);\n    }\n    this.usedColor.unshift(color);\n    const removeColors = this.usedColor.slice(this.themeOptions.maxHistoryColor);\n    removeColors.map((color) => this.removeUsedColor(color));\n    this.usedColor = this.usedColor.slice(0, this.themeOptions.maxHistoryColor);\n    localStorage.setItem(this.localColorUsedKey, JSON.stringify(this.usedColor));\n    this.createUsedColorItem(color);\n  }\n\n  buildItem(option) {\n    if (option.value === 'custom') {\n      const onChange = debounce((color) => {\n        const { r, g, b, a } = HEXtoRGB(color)\n        const result = `rgba(${r}, ${g}, ${b}, ${a})`;\n        this.selectColor(result);\n        this.selectItem(this.options.querySelector(`p[data-value='${result}']`), true);\n      }, 300)\n      const wrapper = document.createElement('div');\n      wrapper.classList.add('custom', 'ql-picker-item');\n      const text = document.createElement('span');\n      text.textContent = this.statics.customText;\n      wrapper.appendChild(text);\n      const colorPicker = createColorPicker({ onChange })\n      wrapper.addEventListener('click', (e) => {\n        e.stopPropagation();\n        if (wrapper.contains(colorPicker)) return;\n        wrapper.appendChild(colorPicker);\n        colorPicker.addEventListener('click', (e) => e.stopPropagation());\n        document.addEventListener('click', () => {\n          colorPicker.remove()\n        }, { once: true });\n      })\n      return wrapper\n    } else {\n      const item = document.createElement('p');\n      item.tabIndex = '0';\n      item.setAttribute('role', 'button');\n      item.classList.add('ql-picker-item');\n\n      const value = option.getAttribute('value');\n      if (!option.value) {\n        item.classList.add('blank');\n        const text = document.createElement('span');\n        text.textContent = this.statics.clearText;\n        item.appendChild(text);\n        // set dark if color is dark color scheme\n        if (!isLightColor(colortoRGB(value))) {\n          item.dataset.dark = 'true';\n        }\n      }\n\n      if (option.hasAttribute('value')) {\n        item.setAttribute('data-value', value);\n      }\n      if (option.textContent) {\n        item.setAttribute('data-label', option.textContent);\n      }\n      item.addEventListener('click', () => {\n        this.selectColor(item?.dataset?.value);\n        this.selectItem(item, true);\n      });\n\n      item.style.setProperty('--bg', value);\n      return item;\n    }\n  }\n\n  selectItem(item, trigger = false) {\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    const colorLabel = this.label.querySelector('.ql-color-label');\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n\n    this.curColor = value;\n\n    const selected = this.container.querySelector('.ql-selected');\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // change index find function\n    this.select.selectedIndex = Array.from(this.select.children).findIndex(\n      (option) => option.value === (item.dataset.value ?? '')\n    );\n    this.currentIndex = this.select.selectedIndex;\n\n    if (item.hasAttribute('data-value')) {\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.themeOptions.closeAfterChange && this.close();\n    }\n  }\n}\n","export function debounce(fn, delay) {\n  let timestamp;\n  return function (...args) {\n    if (timestamp) {\n      clearTimeout(timestamp);\n    }\n    timestamp = setTimeout(() => {\n      fn.apply(this, args);\n    }, delay);\n  };\n}\n","import Quill from 'quill';\r\nconst Parchment = Quill.import('parchment');\r\n// 兼容 quill1.3.7\r\nconst StyleAttr = Parchment.StyleAttributor || Parchment.Attributor.Style;\r\nconst BackgroundStyle = new StyleAttr('background', 'background-color', {\r\n  scope: Parchment.Scope.INLINE,\r\n});\r\n\r\nexport { BackgroundStyle };\r\n","import Quill from 'quill';\r\nconst Parchment = Quill.import('parchment');\r\n// 兼容 quill1.3.7\r\nconst StyleAttr = Parchment.StyleAttributor || Parchment.Attributor.Style;\r\nconst ColorStyle = new StyleAttr('color', 'color', {\r\n  scope: Parchment.Scope.INLINE,\r\n});\r\n\r\nexport { ColorStyle };\r\n","import Quill from 'quill';\r\nconst SnowTheme = Quill.import('themes/snow');\r\nconst IconPicker = Quill.import('ui/icon-picker');\r\nconst Picker = Quill.import('ui/picker');\r\nimport EasyColorPicker from '../ui/easy-color-pick';\r\nimport { BackgroundStyle } from '../formats/background';\r\nimport { ColorStyle } from '../formats/color';\r\n\r\nQuill.register(\r\n  {\r\n    'attributors/style/color': ColorStyle,\r\n    'formats/color': ColorStyle,\r\n    'attributors/style/background': BackgroundStyle,\r\n    'formats/background': BackgroundStyle,\r\n  },\r\n  true\r\n);\r\n\r\nconst ALIGNS = [false, 'center', 'right', 'justify'];\r\nconst FONTS = [false, 'serif', 'monospace'];\r\nconst HEADERS = ['1', '2', '3', false];\r\nconst SIZES = ['small', false, 'large', 'huge'];\r\nconst COLORS = [\r\n  '',\r\n  'rgb(255, 255, 255)',\r\n  'rgb(0, 0, 0)',\r\n  'rgb(72, 83, 104)',\r\n  'rgb(41, 114, 244)',\r\n  'rgb(0, 163, 245)',\r\n  'rgb(49, 155, 98)',\r\n  'rgb(222, 60, 54)',\r\n  'rgb(248, 136, 37)',\r\n  'rgb(245, 196, 0)',\r\n  'rgb(153, 56, 215)',\r\n\r\n  'rgb(242, 242, 242)',\r\n  'rgb(127, 127, 127)',\r\n  'rgb(243, 245, 247)',\r\n  'rgb(229, 239, 255)',\r\n  'rgb(229, 246, 255)',\r\n  'rgb(234, 250, 241)',\r\n  'rgb(254, 233, 232)',\r\n  'rgb(254, 243, 235)',\r\n  'rgb(254, 249, 227)',\r\n  'rgb(253, 235, 255)',\r\n\r\n  'rgb(216, 216, 216)',\r\n  'rgb(89, 89, 89)',\r\n  'rgb(197, 202, 211)',\r\n  'rgb(199, 220, 255)',\r\n  'rgb(199, 236, 255)',\r\n  'rgb(195, 234, 213)',\r\n  'rgb(255, 201, 199)',\r\n  'rgb(255, 220, 196)',\r\n  'rgb(255, 238, 173)',\r\n  'rgb(242, 199, 255)',\r\n\r\n  'rgb(191, 191, 191)',\r\n  'rgb(63, 63, 63)',\r\n  'rgb(128, 139, 158)',\r\n  'rgb(153, 190, 255)',\r\n  'rgb(153, 221, 255)',\r\n  'rgb(152, 215, 182)',\r\n  'rgb(255, 156, 153)',\r\n  'rgb(255, 186, 132)',\r\n  'rgb(255, 226, 112)',\r\n  'rgb(213, 142, 255)',\r\n\r\n  'rgb(165, 165, 165)',\r\n  'rgb(38, 38, 38)',\r\n  'rgb(53, 59, 69)',\r\n  'rgb(20, 80, 184)',\r\n  'rgb(18, 116, 165)',\r\n  'rgb(39, 124, 79)',\r\n  'rgb(158, 30, 26)',\r\n  'rgb(184, 96, 20)',\r\n  'rgb(163, 130, 0)',\r\n  'rgb(94, 34, 129)',\r\n\r\n  'rgb(147, 147, 147)',\r\n  'rgb(13, 13, 13)',\r\n  'rgb(36, 39, 46)',\r\n  'rgb(12, 48, 110)',\r\n  'rgb(10, 65, 92)',\r\n  'rgb(24, 78, 50)',\r\n  'rgb(88, 17, 14)',\r\n  'rgb(92, 48, 10)',\r\n  'rgb(102, 82, 0)',\r\n  'rgb(59, 21, 81)',\r\n\r\n  'custom',\r\n];\r\n\r\nexport default class EasyColorSnowTheme extends SnowTheme {\r\n  buildPickers(selects, icons) {\r\n    this.pickers = Array.from(selects).map((select) => {\r\n      if (select.classList.contains('ql-align')) {\r\n        if (select.querySelector('option') == null) {\r\n          fillSelect(select, ALIGNS);\r\n        }\r\n        if (typeof icons.align === 'object') {\r\n          return new IconPicker(select, icons.align);\r\n        }\r\n      }\r\n      if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\r\n        const format = select.classList.contains('ql-background') ? 'background' : 'color';\r\n        if (select.querySelector('option') == null) {\r\n          fillColorSelect(select, COLORS);\r\n        }\r\n        return new EasyColorPicker(select, icons[format], this.options.themeOptions);\r\n      }\r\n      if (select.querySelector('option') == null) {\r\n        if (select.classList.contains('ql-font')) {\r\n          fillSelect(select, FONTS);\r\n        } else if (select.classList.contains('ql-header')) {\r\n          fillSelect(select, HEADERS);\r\n        } else if (select.classList.contains('ql-size')) {\r\n          fillSelect(select, SIZES);\r\n        }\r\n      }\r\n      return new Picker(select);\r\n    });\r\n    const update = () => {\r\n      this.pickers.forEach((picker) => {\r\n        if (picker instanceof EasyColorPicker && this.options?.themeOptions?.keepChooseColor) return;\r\n        picker.update();\r\n      });\r\n    };\r\n    this.quill.on(Quill.events.EDITOR_CHANGE, update);\r\n  }\r\n}\r\n\r\nfunction fillSelect(select, values, defaultValue = false) {\r\n  values.forEach((value) => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      option.setAttribute('value', value);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\nfunction fillColorSelect(select, values, format, defaultValue) {\r\n  const colorGetter = document.createElement('span');\r\n  values.forEach((value) => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      colorGetter.style[format] = value;\r\n      option.setAttribute('value', colorGetter.style[format]);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\n","import Quill from 'quill';\r\nconst BubbleTheme = Quill.import('themes/bubble');\r\nconst IconPicker = Quill.import('ui/icon-picker');\r\nconst Picker = Quill.import('ui/picker');\r\nimport EasyColorPicker from '../ui/easy-color-pick';\r\nimport { BackgroundStyle } from '../formats/background';\r\nimport { ColorStyle } from '../formats/color';\r\n\r\nQuill.register(\r\n  {\r\n    'attributors/style/color': ColorStyle,\r\n    'formats/color': ColorStyle,\r\n    'attributors/style/background': BackgroundStyle,\r\n    'formats/background': BackgroundStyle,\r\n  },\r\n  true\r\n);\r\n\r\nconst ALIGNS = [false, 'center', 'right', 'justify'];\r\nconst FONTS = [false, 'serif', 'monospace'];\r\nconst HEADERS = ['1', '2', '3', false];\r\nconst SIZES = ['small', false, 'large', 'huge'];\r\nconst COLORS = [\r\n  '',\r\n  'rgb(255, 255, 255)',\r\n  'rgb(0, 0, 0)',\r\n  'rgb(72, 83, 104)',\r\n  'rgb(41, 114, 244)',\r\n  'rgb(0, 163, 245)',\r\n  'rgb(49, 155, 98)',\r\n  'rgb(222, 60, 54)',\r\n  'rgb(248, 136, 37)',\r\n  'rgb(245, 196, 0)',\r\n  'rgb(153, 56, 215)',\r\n\r\n  'rgb(242, 242, 242)',\r\n  'rgb(127, 127, 127)',\r\n  'rgb(243, 245, 247)',\r\n  'rgb(229, 239, 255)',\r\n  'rgb(229, 246, 255)',\r\n  'rgb(234, 250, 241)',\r\n  'rgb(254, 233, 232)',\r\n  'rgb(254, 243, 235)',\r\n  'rgb(254, 249, 227)',\r\n  'rgb(253, 235, 255)',\r\n\r\n  'rgb(216, 216, 216)',\r\n  'rgb(89, 89, 89)',\r\n  'rgb(197, 202, 211)',\r\n  'rgb(199, 220, 255)',\r\n  'rgb(199, 236, 255)',\r\n  'rgb(195, 234, 213)',\r\n  'rgb(255, 201, 199)',\r\n  'rgb(255, 220, 196)',\r\n  'rgb(255, 238, 173)',\r\n  'rgb(242, 199, 255)',\r\n\r\n  'rgb(191, 191, 191)',\r\n  'rgb(63, 63, 63)',\r\n  'rgb(128, 139, 158)',\r\n  'rgb(153, 190, 255)',\r\n  'rgb(153, 221, 255)',\r\n  'rgb(152, 215, 182)',\r\n  'rgb(255, 156, 153)',\r\n  'rgb(255, 186, 132)',\r\n  'rgb(255, 226, 112)',\r\n  'rgb(213, 142, 255)',\r\n\r\n  'rgb(165, 165, 165)',\r\n  'rgb(38, 38, 38)',\r\n  'rgb(53, 59, 69)',\r\n  'rgb(20, 80, 184)',\r\n  'rgb(18, 116, 165)',\r\n  'rgb(39, 124, 79)',\r\n  'rgb(158, 30, 26)',\r\n  'rgb(184, 96, 20)',\r\n  'rgb(163, 130, 0)',\r\n  'rgb(94, 34, 129)',\r\n\r\n  'rgb(147, 147, 147)',\r\n  'rgb(13, 13, 13)',\r\n  'rgb(36, 39, 46)',\r\n  'rgb(12, 48, 110)',\r\n  'rgb(10, 65, 92)',\r\n  'rgb(24, 78, 50)',\r\n  'rgb(88, 17, 14)',\r\n  'rgb(92, 48, 10)',\r\n  'rgb(102, 82, 0)',\r\n  'rgb(59, 21, 81)',\r\n\r\n  'custom',\r\n];\r\n\r\nexport default class EasyColorBubbleTheme extends BubbleTheme {\r\n  buildPickers(selects, icons) {\r\n    this.pickers = Array.from(selects).map((select) => {\r\n      if (select.classList.contains('ql-align')) {\r\n        if (select.querySelector('option') == null) {\r\n          fillSelect(select, ALIGNS);\r\n        }\r\n        if (typeof icons.align === 'object') {\r\n          return new IconPicker(select, icons.align);\r\n        }\r\n      }\r\n      if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\r\n        const format = select.classList.contains('ql-background') ? 'background' : 'color';\r\n        if (select.querySelector('option') == null) {\r\n          fillColorSelect(select, COLORS);\r\n        }\r\n        return new EasyColorPicker(select, icons[format], this.options.themeOptions);\r\n      }\r\n      if (select.querySelector('option') == null) {\r\n        if (select.classList.contains('ql-font')) {\r\n          fillSelect(select, FONTS);\r\n        } else if (select.classList.contains('ql-header')) {\r\n          fillSelect(select, HEADERS);\r\n        } else if (select.classList.contains('ql-size')) {\r\n          fillSelect(select, SIZES);\r\n        }\r\n      }\r\n      return new Picker(select);\r\n    });\r\n    const update = () => {\r\n      this.pickers.forEach((picker) => {\r\n        if (picker instanceof EasyColorPicker && this.options?.themeOptions?.keepChooseColor) return;\r\n        picker.update();\r\n      });\r\n    };\r\n    this.quill.on(Quill.events.EDITOR_CHANGE, update);\r\n  }\r\n}\r\n\r\nfunction fillSelect(select, values, defaultValue = false) {\r\n  values.forEach((value) => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      option.setAttribute('value', value);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\nfunction fillColorSelect(select, values, format, defaultValue) {\r\n  const colorGetter = document.createElement('span');\r\n  values.forEach((value) => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      colorGetter.style[format] = value;\r\n      option.setAttribute('value', colorGetter.style[format]);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\n"],"names":["normalizeValue","value","max","Math","min","Number","parseFloat","concat","abs","validateHSB","hsb","h","s","b","a","HEXtoRGB","hex","startsWith","slice","r","parseInt","g","toFixed","RGBtoHSB","rgb","v","d","HSBtoRGB","i","floor","f","p","q","t","mod","round","RGBtoHEX","toString","key","length","join","HSBtoHEX","colortoRGB","color","span","document","createElement","style","backgroundColor","colorString","match","replace","console","warn","RGBStringtoRGB","createColorPicker","options","arguments","undefined","contentHeight","hsbValue","bem","n","prefix","be","e","bm","m","ns","bs","cv","is","createBEM","root","classList","add","content","colorSelector","colorBackground","appendChild","colorHandle","colorAlpha","alphaBg","alphaHandle","colorHue","colorHueHandle","action","_map2","_slicedToArray","map","item","label","textContent","toUpperCase","colorInput","addEventListener","replaceAll","updateValue","Object","assign","_defineProperty","updateUI","colorRInput","colorGInput","colorBInput","colorAInput","colorDragging","hueDragging","alphaDragging","updateInput","_step","_iterator","_createForOfIteratorHelper","entries","done","_step$value","String","err","_HSBtoRGB","left","top","background","onChange","pickColor","event","rect","getBoundingClientRect","window","pageYOffset","documentElement","scrollTop","body","scrollLeft","pageX","pageY","pickHue","pickAlpha","handleSizeSec","width","onDrag","preventDefault","onColorSelectorDragEnd","removeEventListener","onColorHueDragEnd","onColorAlphaDragEnd","Picker","Quill","EasyColorPicker","select","themeOptions","_this2","_classCallCheck","_callSuper","localStorageKey","closeAfterChange","customColorChangeDelay","maxHistoryColor","expandIcon","keepChooseColor","innerHTML","container","localColorUsedKey","className","usedColor","JSON","parse","localStorage","getItem","Array","Error","setItem","createUsedColor","bindLabelEvent","expendIcon","curColor","_inherits","_createClass","get","this","constructor","_this3","close","selectItem","from","querySelectorAll","find","op","_op$dataset$value","dataset","_this4","parentNode","insertBefore","nextSibling","togglePicker","labelIcon","option","currentIndex","isActive","querySelector","toggle","usedWrap","usedColorLabels","createUsedColorItem","createUsedColorOption","buildItem","setAttribute","findOption","remove","_this5","index","findIndex","c","repeatColor","splice","removeUsedColor","unshift","stringify","_this6","fn","_HEXtoRGB","result","selectColor","delay","_this","_len","args","_key","timestamp","clearTimeout","setTimeout","apply","wrapper","text","statics","customText","colorPicker","stopPropagation","contains","once","tabIndex","getAttribute","clearText","dark","hasAttribute","_item$dataset","setProperty","trigger","colorLabel","tagName","stroke","fill","selected","selectedIndex","children","_item$dataset$value","removeAttribute","dispatchEvent","Event","Parchment","BackgroundStyle","StyleAttributor","Attributor","Style","scope","Scope","INLINE","ColorStyle","SnowTheme","IconPicker","register","ALIGNS","FONTS","HEADERS","SIZES","COLORS","EasyColorSnowTheme","selects","icons","_this7","pickers","fillSelect","_typeof","align","format","values","defaultValue","colorGetter","forEach","fillColorSelect","quill","on","events","EDITOR_CHANGE","picker","_this7$options","update","BubbleTheme","EasyColorBubbleTheme","_this8","_this8$options"],"mappings":"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"}